{"version":3,"file":"bundle.js","sources":["../src/animations.ts","../src/main.ts"],"sourcesContent":["export interface Anim {\n  name: string;\n  frames: Frame[];\n}\n\nexport interface Frame {\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n}\n\n/**\n * From Andreas LÃ¶w, creator of TexturePacker:\n * https://gamedev.stackexchange.com/a/116000\n */\nexport interface TexturePackerJsonHashFrame {\n  frame: {\n    x: number;\n    y: number;\n    w: number;\n    h: number;\n  };\n  rotated: boolean;\n  trimmed: boolean;\n  spriteSourceSize: {\n    x: number;\n    y: number;\n    w: number;\n    h: number;\n  };\n  sourceSize: {\n    w: number;\n    h: number;\n  };\n}\n\nexport interface TexturePackerJsonHash {\n  frames: {[name: string]: TexturePackerJsonHashFrame};\n  meta: {\n    app: string;\n    version: string;\n    image: string;\n    format: string;\n    size: {w: number; h: number};\n    scale: string;\n    smartupdate?: string;\n  };\n}\n\nexport function newAnim(\n  name: string,\n  x: number,\n  y: number,\n  w: number,\n  h: number,\n  frameW: number,\n  frameH: number,\n  frameCount: number = Infinity\n): Anim {\n  // w, h, frameW, frameH, frameCount should always be > 0\n  if (w < 1) w = 1;\n  if (h < 1) h = 1;\n  if (frameW < 1) frameW = 1;\n  if (frameH < 1) frameH = 1;\n  if (frameCount < 1) frameCount = Infinity;\n\n  // Don't divide by 0\n  if (frameH === 0 && h !== frameH) frameH = h;\n  if (frameW === 0 && w !== frameW) frameW = w;\n\n  const rows = Math.max(Math.ceil(h / frameH), 0);\n  const cols = Math.max(Math.ceil(w / frameW), 0);\n\n  const frames: Frame[] = [];\n\n  for (let row = 0; row < rows; row++) {\n    for (let col = 0; col < cols; col++) {\n      if (frameCount > 0) {\n        frames.push({\n          x: x + col * frameW,\n          y: y + row * frameH,\n          w: frameW,\n          h: frameH,\n        });\n        frameCount--;\n      }\n    }\n  }\n\n  return {\n    name,\n    frames,\n  };\n}\n\nexport function anims2json(\n  anims: Iterable<Anim>,\n  sourceName: string,\n  sourceW: number,\n  sourceH: number\n): TexturePackerJsonHash {\n  const hash: TexturePackerJsonHash = {\n    frames: {},\n    meta: {\n      app: 'sprite-sheet-to-json',\n      version: '1.0.0',\n      image: sourceName,\n      format: 'RGBA8888',\n      size: {w: sourceW, h: sourceH},\n      scale: '1',\n    },\n  };\n\n  for (const anim of anims) {\n    for (const [i, {x, y, w, h}] of anim.frames.entries()) {\n      hash.frames[`${anim.name}-${i}`] = {\n        frame: {x, y, w, h},\n        rotated: false,\n        trimmed: false,\n        spriteSourceSize: {x, y, w, h},\n        sourceSize: {\n          w: sourceW,\n          h: sourceH,\n        },\n      };\n    }\n  }\n\n  return hash;\n}\n","import {Anim, newAnim, anims2json} from './animations';\n\n/** STATE */\n\n// Map to hold anims\nconst anims: Map<string, Anim> = new Map();\n\n/** GUI */\n\n// Invisible canvas to hold sprite sheet image data\nconst main = document.createElement('canvas');\nconst mainCtx = main.getContext('2d');\n\n// Invisible canvas to hold animation frame overlays\nconst overlay = document.createElement('canvas');\nconst overlayCtx = overlay.getContext('2d');\n\n// Visible canvas to display everything at 4x scale\nconst disp = document.getElementById('disp') as HTMLCanvasElement;\nconst dispCtx = disp.getContext('2d');\n\n// Browse button to pick sprite sheet image\nconst browseBtn = document.getElementById('browse') as HTMLInputElement;\nbrowseBtn.addEventListener('change', handleFile);\n\n// View JSON button to show TexturePacker JSON Hash output\nconst viewJsonBtn = document.getElementById('view-json') as HTMLButtonElement;\nviewJsonBtn.addEventListener('click', showJson);\n\n// Save JSON button to download TexturePacker JSON Hash output\nconst saveJsonBtn = document.getElementById('save-json') as HTMLButtonElement;\nsaveJsonBtn.addEventListener('click', saveJson);\n\n// Anims select\nconst animsSel = document.getElementById('anims') as HTMLSelectElement;\nanimsSel.addEventListener('change', selectAnim);\n\n// Frames select\nconst framesSel = document.getElementById('frames') as HTMLSelectElement;\n\n// Add Anim\nconst addAnimBtn = document.getElementById('add-anim') as HTMLButtonElement;\naddAnimBtn.addEventListener('click', addAnim);\n// Del Anim\nconst delAnimBtn = document.getElementById('del-anim') as HTMLButtonElement;\ndelAnimBtn.addEventListener('click', delAnim);\n\n// Add Frame\nconst addFrameBtn = document.getElementById('add-frame') as HTMLButtonElement;\n// Del Frame\nconst delFrameBtn = document.getElementById('del-frame') as HTMLButtonElement;\n\n// Name\nconst namePanel = document.getElementById('name-panel') as HTMLDivElement;\nconst nameText = document.getElementById('name-text') as HTMLInputElement;\nnameText.addEventListener('focus', () => nameText.select());\nnameText.addEventListener('input', setAnimName);\n\n// Frames\nconst framesPanel = document.getElementById('frames-panel') as HTMLDivElement;\n\n// Frames controls\nconst framesCtls = {\n  x: document.getElementById('x') as HTMLInputElement,\n  y: document.getElementById('y') as HTMLInputElement,\n  w: document.getElementById('w') as HTMLInputElement,\n  h: document.getElementById('h') as HTMLInputElement,\n  frameW: document.getElementById('frame-w') as HTMLInputElement,\n  frameH: document.getElementById('frame-h') as HTMLInputElement,\n  frameCount: document.getElementById('frame-count') as HTMLInputElement,\n};\nObject.values(framesCtls).forEach(ctl => {\n  ctl.addEventListener('focus', () => ctl.select());\n  ctl.addEventListener('input', updateAnim);\n});\n\n// Create/Cancel Anim\nconst createBtn = document.getElementById('create') as HTMLButtonElement;\ncreateBtn.addEventListener('click', createAnim);\nconst cancelBtn = document.getElementById('cancel') as HTMLButtonElement;\ncancelBtn.addEventListener('click', cancelAnim);\n\n// View JSON div\nconst jsonDiv = document.getElementById('json-div') as HTMLInputElement;\nconst jsonFade = document.getElementById('json-fade') as HTMLInputElement;\nconst jsonText = document.getElementById('json-text') as HTMLInputElement;\njsonFade.addEventListener('click', hideJson);\n\n/** FUNCTIONS */\n\nasync function handleFile() {\n  // Get file handle\n  const file = this.files[0] as File;\n\n  // Create img element\n  const img = new Image();\n  img.addEventListener('load', function () {\n    // Load image into main\n    main.width = this.width;\n    main.height = this.height;\n    mainCtx.imageSmoothingEnabled = false;\n    mainCtx.drawImage(img, 0, 0);\n\n    // Fit overlay canvas to main\n    overlay.width = main.width;\n    overlay.height = main.height;\n\n    // Scale disp to 4x main\n    disp.width = main.width * 4;\n    disp.height = main.height * 4;\n\n    // Refresh display\n    refreshDisp();\n  });\n\n  // Load file into img\n  img.src = URL.createObjectURL(file);\n}\n\nfunction selectAnim() {\n  const animOpt = animsSel.options[animsSel.selectedIndex];\n  if (animOpt) {\n    // Show name panel\n    namePanel.style.visibility = 'visible';\n\n    // Fill name text\n    nameText.value = animOpt.text;\n\n    // Draw its overlay\n    drawOverlay(anims.get(animOpt.text));\n  } else {\n    // Hide name panel\n    namePanel.style.visibility = 'hidden';\n  }\n}\n\nfunction addAnim() {\n  showCreatePanel();\n\n  updateAnim();\n}\n\nfunction updateAnim() {\n  // Restrict input\n  for (const key in framesCtls) {\n    const ctl = framesCtls[key];\n    ctl.value = ctl.value.replace(/[^0-9]/, '');\n  }\n\n  for (const key of ['x', 'w', 'frameW']) {\n    const ctl = framesCtls[key];\n    ctl.value = Math.min(ctl.value, main.width);\n  }\n\n  for (const key of ['y', 'h', 'frameH']) {\n    const ctl = framesCtls[key];\n    ctl.value = Math.min(ctl.value, main.height);\n  }\n\n  // Create anim from frames values\n  const anim = newAnim(\n    nameText.value,\n    Number(framesCtls.x.value),\n    Number(framesCtls.y.value),\n    Number(framesCtls.w.value),\n    Number(framesCtls.h.value),\n    Number(framesCtls.frameW.value),\n    Number(framesCtls.frameH.value),\n    Number(framesCtls.frameCount.value)\n  );\n\n  // Draw it\n  drawOverlay(anim);\n}\n\nfunction createAnim() {\n  // Hide Name/Frames panel\n  hideCreatePanel();\n\n  // Create anim from frames values\n  const anim = newAnim(\n    nameText.value,\n    Number(framesCtls.x.value),\n    Number(framesCtls.y.value),\n    Number(framesCtls.w.value),\n    Number(framesCtls.h.value),\n    Number(framesCtls.frameW.value),\n    Number(framesCtls.frameH.value),\n    Number(framesCtls.frameCount.value)\n  );\n\n  // Add it to the anims map\n  anims.set(anim.name, anim);\n\n  // Add an option for it to the anims selector\n  const animOpt = document.createElement('option');\n  animOpt.text = anim.name;\n  animsSel.add(animOpt);\n\n  // Select it\n  animsSel.selectedIndex = animOpt.index;\n  selectAnim();\n}\n\nfunction cancelAnim() {\n  // Hide Name/Frames panel\n  hideCreatePanel();\n\n  // Clear overlay\n  overlayCtx.clearRect(0, 0, overlay.width, overlay.height);\n\n  // Refresh disp\n  refreshDisp();\n}\n\nfunction delAnim() {\n  const delIdx = animsSel.selectedIndex;\n  const animOpt = animsSel.options[animsSel.selectedIndex];\n  if (animOpt) {\n    // Delete anim from anims map\n    anims.delete(animOpt.text);\n\n    // Remove its option from anims selector\n    animOpt.remove();\n\n    // Clear the overlay\n    overlayCtx.clearRect(0, 0, overlay.width, overlay.height);\n    refreshDisp();\n\n    // Select the one that replaced it\n    const maxIdx = animsSel.options.length - 1;\n    animsSel.selectedIndex = Math.min(delIdx, maxIdx);\n    selectAnim();\n  }\n}\n\nfunction setAnimName() {\n  // Restrict input\n  nameText.value = nameText.value.replace(/[^a-zA-Z0-9_-]/, '');\n  // Get anim\n  const animOpt = animsSel.options[animsSel.selectedIndex];\n  if (animOpt) {\n    // Change its name\n    const anim = anims.get(animOpt.text);\n    anims.delete(anim.name);\n    anim.name = nameText.value;\n    animOpt.text = nameText.value;\n    anims.set(anim.name, anim);\n  }\n}\n\nfunction drawOverlay(anim: Anim) {\n  // Clear overlay\n  overlayCtx.clearRect(0, 0, overlay.width, overlay.height);\n\n  // Draw an overlay for the anim\n  for (const frame of anim.frames) {\n    overlayCtx.imageSmoothingEnabled = false;\n    overlayCtx.lineWidth = 1;\n    overlayCtx.strokeStyle = 'black';\n    overlayCtx.translate(0.5, 0.5);\n    overlayCtx.strokeRect(frame.x, frame.y, frame.w - 1, frame.h - 1);\n    overlayCtx.setTransform(1, 0, 0, 1, 0, 0);\n  }\n\n  // Refresh disp\n  refreshDisp();\n}\n\nfunction refreshDisp() {\n  // Clear disp\n  dispCtx.clearRect(0, 0, disp.width, disp.height);\n\n  // Draw main and overlay to disp\n  dispCtx.imageSmoothingEnabled = false;\n  // dispCtx.globalCompositeOperation = 'screen';\n  dispCtx.drawImage(\n    main,\n    0,\n    0,\n    main.width,\n    main.height,\n    0,\n    0,\n    disp.width,\n    disp.height\n  );\n  dispCtx.drawImage(\n    overlay,\n    0,\n    0,\n    overlay.width,\n    overlay.height,\n    0,\n    0,\n    disp.width,\n    disp.height\n  );\n}\n\nfunction showCreatePanel() {\n  // Ensure no anim is already selected\n  animsSel.selectedIndex = -1;\n\n  // Show name/frames panel\n  namePanel.style.visibility = 'visible';\n  framesPanel.style.visibility = 'visible';\n\n  // Disable everything else\n  browseBtn.disabled = true;\n  animsSel.disabled = true;\n  framesSel.disabled = true;\n  addAnimBtn.disabled = true;\n  delAnimBtn.disabled = true;\n  addFrameBtn.disabled = true;\n  delFrameBtn.disabled = true;\n}\n\nfunction hideCreatePanel() {\n  // Hide name/frames panel\n  namePanel.style.visibility = 'hidden';\n  framesPanel.style.visibility = 'hidden';\n\n  // Enable everything else\n  browseBtn.disabled = false;\n  animsSel.disabled = false;\n  framesSel.disabled = false;\n  addAnimBtn.disabled = false;\n  delAnimBtn.disabled = false;\n  addFrameBtn.disabled = false;\n  delFrameBtn.disabled = false;\n}\n\nfunction showJson() {\n  const srcName = browseBtn.files.length > 0 ? browseBtn.files[0].name : '';\n  const jsonHash = anims2json(anims.values(), srcName, main.width, main.height);\n  jsonText.value = JSON.stringify(jsonHash, null, 2);\n  jsonDiv.style.visibility = 'visible';\n}\n\nfunction hideJson() {\n  jsonDiv.style.visibility = 'hidden';\n}\n\nfunction saveJson() {\n  const srcName = browseBtn.files.length > 0 ? browseBtn.files[0].name : 'name';\n  const split = srcName.split('.');\n  const name = split.length > 1 ? split.slice(0, -1).join('.') : srcName;\n  const jsonName = name + '.json';\n\n  const jsonHash = anims2json(anims.values(), srcName, main.width, main.height);\n  const json = JSON.stringify(jsonHash, null, 2);\n\n  download(jsonName, json);\n}\n\nfunction download(filename: string, text: string | number | boolean) {\n  const element = document.createElement('a');\n  element.setAttribute(\n    'href',\n    'data:text/plain;charset=utf-8,' + encodeURIComponent(text)\n  );\n  element.setAttribute('download', filename);\n\n  element.style.display = 'none';\n  document.body.appendChild(element);\n\n  element.click();\n\n  document.body.removeChild(element);\n}\n"],"names":["newAnim","name","x","y","w","h","frameW","frameH","frameCount","Infinity","rows","Math","max","ceil","cols","frames","row","col","push","anims2json","anims","sourceName","sourceW","sourceH","hash","meta","app","version","image","format","size","scale","anim","i","entries","frame","rotated","trimmed","spriteSourceSize","sourceSize","Map","main","document","createElement","mainCtx","getContext","overlay","overlayCtx","disp","getElementById","dispCtx","browseBtn","addEventListener","async","file","this","files","img","Image","width","height","imageSmoothingEnabled","drawImage","refreshDisp","src","URL","createObjectURL","srcName","length","jsonHash","values","jsonText","value","JSON","stringify","jsonDiv","style","visibility","split","jsonName","slice","join","json","filename","text","element","setAttribute","encodeURIComponent","display","body","appendChild","click","removeChild","download","animsSel","selectAnim","framesSel","addAnimBtn","selectedIndex","namePanel","framesPanel","disabled","delAnimBtn","addFrameBtn","delFrameBtn","updateAnim","delIdx","animOpt","options","delete","remove","clearRect","maxIdx","min","nameText","select","replace","get","set","framesCtls","Object","forEach","ctl","hideCreatePanel","Number","add","index","jsonFade","drawOverlay","key","lineWidth","strokeStyle","translate","strokeRect","setTransform"],"mappings":"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"}